(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-aa02"],{"0aP3":function(e,o,t){"use strict";var s=t("9OpF");t.n(s).a},"9OpF":function(e,o,t){},OKZI:function(e,o,t){"use strict";t.r(o);var s=t("gDS+"),a=t.n(s),l={data:function(){return{name:"",daterange:[],ztMap:"",overlays:[],mouseTool:"",drawState:!1,results:[],markers:[],ztInfoWindow:"",sqName:"",colorList:[{color:"#000000"},{color:"#FF0000"},{color:"#00FF00"},{color:"#0000FF"},{color:"#FFFF00"},{color:"#00FFFF"},{color:"#FF00FF"},{color:"#C0C0C0"},{color:"#FFFFFF"}],choiceColor:"",oldOverlays:[]}},methods:{backTable:function(){this.$router.push("/map")},init:function(){var e=this;this.results=[];var o=this;this.ztMap=new AMap.Map("container",{zoom:14});var t=function(t){console.log(e.oldOverlays[t]);var s=[],a=0,l=0;for(var r in e.oldOverlays[t].overlays){var i=[e.oldOverlays[t].overlays[r].lng,e.oldOverlays[t].overlays[r].lat];a+=parseFloat(e.oldOverlays[t].overlays[r].lng),l+=parseFloat(e.oldOverlays[t].overlays[r].lat),s.push(i)}a/=e.oldOverlays[t].overlays.length,l/=e.oldOverlays[t].overlays.length,new AMap.Polygon({map:e.ztMap,path:s,strokeColor:"#FF33FF",strokeOpacity:.2,strokeWeight:3,fillColor:e.oldOverlays[t].color,fillOpacity:.35}).on("click",function(){o.ztInfoWindow=new AMap.InfoWindow({content:"社区名称:"+o.oldOverlays[t].name,isCustom:!1,offset:new AMap.Pixel(0,-0)}),o.ztInfoWindow.open(o.ztMap,new AMap.LngLat(a,l)),console.log(o.oldOverlays[t].name)}),e.ztMap.setFitView()};for(var s in this.oldOverlays)t(s);o.mouseTool=new AMap.MouseTool(o.ztMap),o.overlays=[],o.mouseTool.on("draw",function(e){o.overlays.push(e.obj),o.drawState=!1,o.mouseTool.close(!1)})},clearMap:function(){for(var e in this.ztMap.remove(this.overlays),this.overlays=[],this.results=[],console.log(this.results),this.markers)this.ztMap.remove(this.markers[e]);this.markers=[]},openDraw:function(){var e=this;this.choiceColor?this.overlays.length?(console.log(this.overlays),this.$confirm("此操作将清除已绘画区域, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$message({type:"success",message:"已开启绘图"}),e.clearMap(),e.mouseTool.polygon({fillColor:e.choiceColor,strokeColor:"#80d8ff"}),e.drawState=!0}).catch(function(){e.$message({type:"info",message:"已取消"})})):(this.$message({type:"success",message:"已开启绘图"}),this.mouseTool.polygon({fillColor:this.choiceColor,strokeColor:"#80d8ff"}),this.drawState=!0):this.$message({type:"warning",message:"请选择颜色"})},closeDraw:function(){this.drawState=!1,this.$message({type:"success",message:"已关闭绘图"}),this.mouseTool.close(!0)},createSQ:function(){if(this.sqName)if(this.overlays.length){var e={name:this.sqName,overlays:this.overlays[0].getPath(),color:this.choiceColor};this.oldOverlays.push(e),console.log(this.oldOverlays);var o=a()(this.oldOverlays);localStorage.setItem("sqOverlays",o),this.$message({type:"success",message:"添加成功"}),this.backTable()}else this.$message({type:"warning",message:"请绘制社区范围"});else this.$message({type:"warning",message:"请添加社区名称"})},clearCache:function(){localStorage.setItem("sqOverlays",null)}},mounted:function(){try{var e=JSON.parse(localStorage.getItem("sqOverlays"));for(var o in e)this.oldOverlays.push(e[o]);console.log(this.oldOverlays)}catch(e){console.log(e)}this.init()}},r=(t("0aP3"),t("KHd+")),i=Object(r.a)(l,function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("div",[t("el-row",{staticClass:"header"},[t("el-col",{attrs:{span:4}},[t("el-button",{attrs:{type:"primary"},on:{click:e.backTable}},[e._v("返回")]),e._v(" "),t("el-button",{on:{click:e.clearCache}},[e._v("清楚缓存")])],1),e._v(" "),t("el-col",{attrs:{span:20}},[t("div",{staticClass:"mapHeader"},[e._v("新建区域")])])],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:3}},[t("el-form",[t("el-form-item",{attrs:{label:"社区名称"}},[t("el-input",{attrs:{placeholder:"请输入社区名称..."},model:{value:e.sqName,callback:function(o){e.sqName=o},expression:"sqName"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"颜色选择"}},[t("el-select",{model:{value:e.choiceColor,callback:function(o){e.choiceColor=o},expression:"choiceColor"}},e._l(e.colorList,function(o){return t("el-option",{key:o.id,attrs:{value:o.color}},[t("div",{style:"float:left;border:1px solid black;width:34px;height:34px;background:"+o.color}),e._v(" "),t("span",[e._v(e._s(o.color))])])})),e._v(" "),t("div",{style:"height:43px;width:200px;background:"+e.choiceColor})],1),e._v(" "),t("el-form-item",{attrs:{label:"区域设置方法"}},[t("div",[e._v(":")]),e._v(" "),t("div",[e._v("1.点击开启绘图单击地图区域为多边形起点")]),e._v(" "),t("div",[e._v("2.点击多边形的多个转折点圈定封闭范围")]),e._v(" "),t("div",[e._v("3.范围规定好双击起点即为完成绘图")])])],1),e._v(" "),e.drawState?e._e():t("el-button",{attrs:{type:"primary"},on:{click:e.openDraw}},[e._v("开启绘图")]),e._v(" "),e.drawState?t("el-button",{attrs:{type:"primary"},on:{click:e.closeDraw}},[e._v("关闭绘图")]):e._e(),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.createSQ}},[e._v("添加")])],1),e._v(" "),t("el-col",{attrs:{span:20,offset:1}},[t("div",{staticStyle:{height:"800px"},attrs:{id:"container"}})])],1)],1)},[],!1,null,"98e0802c",null);i.options.__file="createMap.vue";o.default=i.exports},"gDS+":function(e,o,t){e.exports={default:t("oh+g"),__esModule:!0}},"oh+g":function(e,o,t){var s=t("WEpk"),a=s.JSON||(s.JSON={stringify:JSON.stringify});e.exports=function(e){return a.stringify.apply(a,arguments)}}}]);