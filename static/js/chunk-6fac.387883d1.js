(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-6fac"],{Kp3i:function(e,t,a){},fLbk:function(e,t,a){"use strict";a.r(t);var s=a("gDS+"),o=a.n(s),l={data:function(){return{tableData:[{name:"王小虎"},{name:"王小虎2"},{name:"王小虎3"},{name:"王小虎4"}],ztMap:"",markers:[],ztInfoWindow:"",oldOverlays:[],date:"",drawState:!1,state:"",sqName:"",jgName:"",address:"",plan:"",info:"",area:"",points:"",population:"",position:[],oldTask:[]}},methods:{init:function(){this.results=[];var e=this;for(var t in this.ztMap=new AMap.Map("container",{zoom:14}),this.oldOverlays){var a=[];for(var s in this.oldOverlays[t].overlays){var o=[this.oldOverlays[t].overlays[s].lng,this.oldOverlays[t].overlays[s].lat];parseFloat(this.oldOverlays[t].overlays[s].lng),parseFloat(this.oldOverlays[t].overlays[s].lat),a.push(o)}this.oldOverlays[t].overlays.length,this.oldOverlays[t].overlays.length;new AMap.Polygon({map:this.ztMap,path:a,strokeColor:"#FF33FF",strokeOpacity:.2,strokeWeight:3,fillColor:this.oldOverlays[t].color,fillOpacity:.35});this.ztMap.setFitView()}e.mouseTool=new AMap.MouseTool(e.ztMap),e.markers=[],e.mouseTool.on("draw",function(t){console.log(t),e.markers.push(t.obj),e.drawState=!1,e.mouseTool.close(!1),e.position=[],e.position=[t.obj.getPosition().lng,t.obj.getPosition().lat],console.log(e.position)})},updateMap:function(){try{var e=JSON.parse(localStorage.getItem("sqOverlays"));for(var t in e)this.oldOverlays.push(e[t]);console.log(this.oldOverlays)}catch(e){console.log(e)}this.init()},back:function(){this.$router.push({name:"task"})},openDraw:function(){var e=this;if(this.markers.length)console.log(this.markers),this.$confirm("此操作将清除已绘画区域, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$message({type:"success",message:"已开启绘图"}),e.clearMap();var t="";t="1"==e.state?"blue":"red",console.log(t),e.mouseTool.marker({fillColor:t,strokeColor:"#80d8ff"}),e.drawState=!0}).catch(function(){e.$message({type:"info",message:"已取消"})});else{this.$message({type:"success",message:"已开启绘图"});"1"==this.state?this.mouseTool.marker():this.mouseTool.marker({icon:new AMap.Icon({image:"//a.amap.com/jsapi_demos/static/demo-center/icons/poi-marker-red.png",size:new AMap.Size(20,20),imageSize:new AMap.Size(20,20)})}),this.drawState=!0}},closeDraw:function(){this.drawState=!1,this.$message({type:"success",message:"已关闭绘图"}),this.mouseTool.close(!0)},clearMap:function(){for(var e in this.markers)this.ztMap.remove(this.markers[e]);this.markers=[]},createTask:function(){var e={p1:this.sqName,p2:this.jgName,p3:this.address,p4:this.area,p5:this.points,p6:this.population,p7:this.state,p8:this.plan,p9:this.date,position:this.position};console.log(e),this.oldTask.push(e);var t=o()(this.oldTask);localStorage.setItem("tasks",t),this.$message({type:"success",message:"添加成功"}),this.back()}},mounted:function(){this.oldTask=[],this.oldOverlays=[];try{var e=JSON.parse(localStorage.getItem("sqOverlays"));for(var t in e)this.oldOverlays.push(e[t])}catch(e){console.log(e)}try{var a=JSON.parse(localStorage.getItem("tasks"));for(var s in a)this.oldTask.push(a[s]);console.log(this.oldTask)}catch(e){console.log(e)}this.init()}},i=(a("wHAz"),a("KHd+")),r=Object(i.a)(l,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-header",{staticClass:"header"},[a("el-button",{staticStyle:{margin:"10px"},attrs:{type:"primary"},on:{click:e.back}},[e._v("返回列表")])],1),e._v(" "),a("el-main",{staticClass:"main"},[a("div",{staticStyle:{height:"500px"},attrs:{id:"container"}}),e._v(" "),a("el-form",{attrs:{inline:""}},[a("el-form-item",{attrs:{label:"社区名称："}},[a("el-input",{model:{value:e.sqName,callback:function(t){e.sqName=t},expression:"sqName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"机构/胡同名称："}},[a("el-input",{model:{value:e.jgName,callback:function(t){e.jgName=t},expression:"jgName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"详细地址："}},[a("el-input",{model:{value:e.address,callback:function(t){e.address=t},expression:"address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"下一步安排："}},[a("el-input",{model:{value:e.plan,callback:function(t){e.plan=t},expression:"plan"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"任务说明："}},[a("el-input",{model:{value:e.info,callback:function(t){e.info=t},expression:"info"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"面积："}},[a("el-input",{model:{value:e.area,callback:function(t){e.area=t},expression:"area"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"点位数："}},[a("el-input",{model:{value:e.points,callback:function(t){e.points=t},expression:"points"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"人口："}},[a("el-input",{model:{value:e.population,callback:function(t){e.population=t},expression:"population"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"完成日期："}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"完成状态："}},[a("el-select",{model:{value:e.state,callback:function(t){e.state=t},expression:"state"}},[a("el-option",{attrs:{value:"1",label:"已完成"}}),e._v(" "),a("el-option",{attrs:{value:"0",label:"未完成"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{type:"primary"},on:{click:e.createTask}},[e._v("提交")])],1),e._v(" "),a("el-form-item",{attrs:{label:""}},[e.drawState?e._e():a("el-button",{attrs:{type:"success"},on:{click:e.openDraw}},[e._v("开启绘图")]),e._v(" "),e.drawState?a("el-button",{attrs:{type:"primary"},on:{click:e.closeDraw}},[e._v("关闭绘图")]):e._e()],1)],1)],1)],1)},[],!1,null,null,null);r.options.__file="taskMapAdd.vue";t.default=r.exports},"gDS+":function(e,t,a){e.exports={default:a("oh+g"),__esModule:!0}},"oh+g":function(e,t,a){var s=a("WEpk"),o=s.JSON||(s.JSON={stringify:JSON.stringify});e.exports=function(e){return o.stringify.apply(o,arguments)}},wHAz:function(e,t,a){"use strict";var s=a("Kp3i");a.n(s).a}}]);